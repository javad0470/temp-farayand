<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:view="clr-namespace:SSYM.OrgDsn.UI.View.ActivityDefinition.Main"
             xmlns:base="clr-namespace:SSYM.OrgDsn.UI.View.Base"
             xmlns:popup="clr-namespace:SSYM.OrgDsn.UI.View.ActivityDefinition.Popup"
             xmlns:vm="clr-namespace:SSYM.OrgDsn.ViewModel.ActivityDefinition.Main;assembly=SSYM.OrgDsn.ViewModel"
             xmlns:ucVM="clr-namespace:SSYM.OrgDsn.ViewModel.ActivityDefinition.UserCtl;assembly=SSYM.OrgDsn.ViewModel"
             xmlns:ucView="clr-namespace:SSYM.OrgDsn.UI.View.ActivityDefinition.UserCtl"
             xmlns:prism="clr-namespace:Microsoft.Practices.Prism.Interactivity.InteractionRequest;assembly=Microsoft.Practices.Prism.Interactivity"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
             x:Class="SSYM.OrgDsn.UI.View.ActivityDefinition.Main.DefAct"
             xmlns:custom="clr-namespace:SSYM.OrgDsn.UI"
             Background="Transparent"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="1000">

    <UserControl.Resources>

        <DataTemplate DataType="{x:Type ucVM:DtlAwrOralViewModel}">
            <ucView:DtlAwrOral />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlIfrmOralViewModel}">
            <ucView:DtlIfrmOral />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlIntViewModel}">
            <ucView:DtlInt />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlOutViewModel}">
            <ucView:DtlOut />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlRecvNewsViewModel}">
            <ucView:DtlRecvNews />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:EvtRstErorViewModel}">
            <ucView:EvtRstEror />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:EvtCdn}">
            <ucView:AftrCdn />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:EvtSrtInnSgmtTimViewModel}">
            <ucView:EvtSrtInnSgmtTim />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlActViewModel}">
            <ucView:DtlAct Background="Transparent" />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:DtlSndNewsViewModel}">
            <ucView:DtlSndNews />
        </DataTemplate>

        <!--<DataTemplate DataType="{x:Type ucVM:EvtCdn}">
            <ucView:AftrCdn />
        </DataTemplate>-->

        <!--<DataTemplate DataType="{x:Type ucVM:DtlEvtSrtInnTimImpViewModel}">
            <ucView:DtlEvtSrtInnTimImp />
        </DataTemplate>-->

        <DataTemplate DataType="{x:Type ucVM:DtlEvtSrtViewModel}">
            <ucView:DtlEvtSrt />
        </DataTemplate>

        <DataTemplate DataType="{x:Type ucVM:EvtRstGainAwrNewInnTimImpViewModel}">
            <ucView:EvtRstGainAwrNew />
        </DataTemplate>

        <!--<DataTemplate DataType="{x:Type ucVM:EvtRstGainAwrNewAftrActViewModel}">
            <ucView:EvtRstGainAwrNew />
        </DataTemplate>-->

        <DataTemplate DataType="{x:Type ucVM:EmptyViewModel}">
            <ucView:Empty />
        </DataTemplate>

        <!--Animations-->

        <Storyboard x:Key="Border02-1">

            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                           Storyboard.TargetName="border02">
                <EasingDoubleKeyFrame KeyTime="0"
                                      Value="0" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="1" />
            </DoubleAnimationUsingKeyFrames>

        </Storyboard>

        <Storyboard x:Key="Border02-2">

            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                           Storyboard.TargetName="border02">
                <EasingDoubleKeyFrame KeyTime="0"
                                      Value="1" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>

        </Storyboard>
        <Storyboard x:Key="EvtSrtPnl_Collapse">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="grid">
                <EasingDoubleKeyFrame KeyTime="0:0:0.1"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="textBlock">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="1" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)"
                                           Storyboard.TargetName="border">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="32">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase EasingMode="EaseOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)"
                                           Storyboard.TargetName="button">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                           Storyboard.TargetName="grid">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.1"
                                        Value="{x:Static Visibility.Collapsed}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="EvtSrtPnl_Expand">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="grid">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="0" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="1" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="textBlock">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)"
                                           Storyboard.TargetName="border">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="70">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase EasingMode="EaseOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)"
                                           Storyboard.TargetName="button">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="180" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                           Storyboard.TargetName="grid">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2"
                                        Value="{x:Static Visibility.Visible}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <Storyboard x:Key="EvtRstPnl_Collapse">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="grid2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.1"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="textBlock2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="1" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)"
                                           Storyboard.TargetName="border2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="32">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase EasingMode="EaseOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)"
                                           Storyboard.TargetName="button2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="180" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                           Storyboard.TargetName="grid2">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.1"
                                        Value="{x:Static Visibility.Collapsed}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="EvtRstPnl_Expand">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="grid2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="0" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="1" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                           Storyboard.TargetName="textBlock2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)"
                                           Storyboard.TargetName="border2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3"
                                      Value="70">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase EasingMode="EaseOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)"
                                           Storyboard.TargetName="button2">
                <EasingDoubleKeyFrame KeyTime="0:0:0.2"
                                      Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                           Storyboard.TargetName="grid2">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2"
                                        Value="{x:Static Visibility.Visible}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

    </UserControl.Resources>
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="ToggleButton.Checked"
                      SourceName="button">
            <BeginStoryboard x:Name="EvtSrtPnl_Expand_BeginStoryboard"
                             Storyboard="{StaticResource EvtSrtPnl_Expand}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="ToggleButton.Unchecked"
                      SourceName="button">
            <BeginStoryboard x:Name="EvtSrtPnl_Collapse_BeginStoryboard"
                             Storyboard="{StaticResource EvtSrtPnl_Collapse}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="ToggleButton.Checked"
                      SourceName="button2">
            <BeginStoryboard x:Name="EvtRstPnl_Expand_BeginStoryboard"
                             Storyboard="{StaticResource EvtRstPnl_Expand}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="ToggleButton.Unchecked"
                      SourceName="button2">
            <BeginStoryboard x:Name="EvtRstPnl_Collapse_BeginStoryboard"
                             Storyboard="{StaticResource EvtRstPnl_Collapse}" />
        </EventTrigger>
    </UserControl.Triggers>
    <Grid Style="{StaticResource MainWindowsContentGridStyle}"
          FlowDirection="LeftToRight"
          VerticalAlignment="Stretch"
          Margin="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5*"
                              MinWidth="200" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="1.5*"
                              MinWidth="300" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ucView:OrgPos x:Name="orgPos"
                           DataContext="{Binding OrgPosVM}"
                           Grid.Row="0"
                           HorizontalAlignment="Stretch" />
            <ucView:ActLst x:Name="actLst"
                           DataContext="{Binding ActLstVM}"
                           Visibility="{Binding DataContext.ActLstVisible, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource bool2VisConv}}"
                           MaxHeight="{Binding Path=ActualHeight, RelativeSource={RelativeSource AncestorType=Grid}, Converter={StaticResource SizeConverter}, ConverterParameter=*0.75}"
                           Grid.Row="1"
                           HorizontalAlignment="Stretch" />
        </Grid>
        <GridSplitter Grid.Column="1"
                      Grid.Row="0"
                      Background="{DynamicResource appClr1}"
                      ResizeBehavior="PreviousAndNext"
                      ResizeDirection="Columns"
                      Grid.RowSpan="3"
                      Width="5" />
        <Grid Grid.Column="0"
              Visibility="{Binding DataContext.IsActVisible, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="1.5*"
                               MinHeight="200" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*"
                               MinHeight="100" />
            </Grid.RowDefinitions>
            <!--<view:ActivityDiagram x:Name="ActDgrm2"
                                      Grid.Column="0"
                                      Margin="0,10"
                                      Visibility="{Binding DataContext.IsActVisible, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                      DataContext="{Binding ActDgrm}" />-->
            <Grid Margin="0,10">
                <!--<Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>-->
                <view:ActDgrm x:Name="ActDgrm"
                              DataContext="{Binding ActDgrm}" />
                <Border x:Name="border"
                        Width="32"
                        BorderThickness="1,0,0,0"
                        BorderBrush="{DynamicResource appClr1}"
                        Margin="0"
                        Background="#FFE6E6E6"
                        HorizontalAlignment="Right"
                        CornerRadius="5,0,0,5">
                    <Border.Effect>
                        <DropShadowEffect ShadowDepth="0"
                                          BlurRadius="10"
                                          Opacity="1"
                                          Color="{DynamicResource appClr1_c}" />
                    </Border.Effect>
                    <Grid>
                        <TextBlock x:Name="textBlock"
                                   Text="رخدادهای آغازگر"
                                   FontFamily="{DynamicResource mainFontFamily}"
                                   FontSize="18"
                                   Foreground="{DynamicResource appClr1}"
                                   RenderTransformOrigin="0.5,0.5"
                                   Margin="-95,89,15,0"
                                   VerticalAlignment="Top">
                            <TextBlock.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform Angle="-90"
                                                     CenterX="0.5"
                                                     CenterY="0.5" />
                                    <TranslateTransform X="55" />
                                </TransformGroup>
                            </TextBlock.RenderTransform>
                        </TextBlock>
                        <Grid x:Name="grid"
                              Margin="0,48,0,0"
                              Opacity="0"
                              Visibility="Collapsed">
                            <Rectangle VerticalAlignment="Top"
                                       HorizontalAlignment="Right"
                                       Width="20"
                                       Height="146"
                                       Fill="{DynamicResource appClr1Opac}" />
                            <TextBlock Text="مستقل از فعالیت"
                                       FontFamily="{DynamicResource mainFontFamily}"
                                       FontSize="14"
                                       Foreground="White"
                                       RenderTransformOrigin="0.5,0.5"
                                       Margin="-85,7,-25,0"
                                       VerticalAlignment="Top">
                                <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform />
                                        <SkewTransform />
                                        <RotateTransform Angle="-90"
                                                         CenterX="0.5"
                                                         CenterY="0.5" />
                                        <TranslateTransform X="55" />
                                    </TransformGroup>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <Rectangle VerticalAlignment="Top"
                                       HorizontalAlignment="Right"
                                       Width="20"
                                       Height="95"
                                       Margin="0,146,0,0"
                                       Fill="{DynamicResource appClr2Opac}" />
                            <TextBlock Text="پس از فعالیت قبلی"
                                       FontFamily="{DynamicResource mainFontFamily}"
                                       FontSize="14"
                                       Foreground="White"
                                       RenderTransformOrigin="0.5,0.5"
                                       Margin="-85,135,-25,0"
                                       VerticalAlignment="Top">
                                <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform />
                                        <SkewTransform />
                                        <RotateTransform Angle="-90"
                                                         CenterX="0.5"
                                                         CenterY="0.5" />
                                        <TranslateTransform X="55" />
                                    </TransformGroup>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <Rectangle Fill="{DynamicResource appClr1Opac}"
                                       HorizontalAlignment="Right"
                                       Width="20"
                                       Margin="0,241,0,0" />
                            <TextBlock Text="هنگام فعالیت قبلی"
                                       FontFamily="{DynamicResource mainFontFamily}"
                                       FontSize="14"
                                       Foreground="White"
                                       RenderTransformOrigin="0.5,0.5"
                                       Margin="-85,250,-25,0"
                                       VerticalAlignment="Top">
                                <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform />
                                        <SkewTransform />
                                        <RotateTransform Angle="-90"
                                                         CenterX="0.5"
                                                         CenterY="0.5" />
                                        <TranslateTransform X="55" />
                                    </TransformGroup>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <StackPanel Width="42"
                                        HorizontalAlignment="Left"
                                        Margin="4,0,0,0">
                                <Button x:Name="InSgmtTim"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource Time}"
                                        Tag="inSgmtTime"
                                        ToolTip="در مقاطع زمانی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        MouseDown="InSgmtTim_MouseDown"
                                        MouseUp="InSgmtTim_MouseUp"
                                        Margin="0,10,0,0" />
                                <Button x:Name="AftrCdn"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource Special}"
                                        Tag="aftrCdnEvtSrt"
                                        ToolTip="پس از وقوع شرایط"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,2,0,0" />
                                <Button x:Name="AftrAwr"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource Understand}"
                                        Tag="aftrAwareEvtSrt"
                                        ToolTip="پس از آگاهی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,2,0,0" />
                                <Button x:Name="AnyCdnAftrActPvs"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource GeneralAfter}"
                                        Tag="aftrAnyCdnEvtSrt"
                                        ToolTip="وقوع هر شرایطی پس از فعالیت قبلی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,10,0,0" />
                                <Button x:Name="CdnSpcAftrActPvs"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource SpecialAfter}"
                                        Tag="spcCdnEvtSrtAftr"
                                        ToolTip="وقوع شرایط خاص پس از فعالیت قبلی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,2,0,0" />
                                <Button x:Name="CdnSpcInTimImpActPvs"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource SpecialDuring}"
                                        Tag="spcCdnEvtSrt"
                                        ToolTip="وقوع شرایط خاص هنگام فعالیت قبلی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,10,0,0" />
                                <Button x:Name="ErorInActPvs"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource ErrorDuring}"
                                        Tag="errAccurEvtSrt"
                                        ToolTip="وقوع خطا هنگام فعالیت قبلی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,2,0,0" />
                                <Button x:Name="CnlActPvs"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource CancelDuring}"
                                        Tag="cancelEvtSrt"
                                        ToolTip="لغو فعالیت قبلی"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Margin="0,2,0,0" />
                            </StackPanel>
                            <Rectangle Margin="0,240,0,0"
                                       Height="2"
                                       VerticalAlignment="Top">
                                <Rectangle.Fill>
                                    <LinearGradientBrush EndPoint="1,0.5"
                                                         StartPoint="0,0.5">
                                        <GradientStop Color="{DynamicResource appClr1_c}"
                                                      Offset="0.575" />
                                        <GradientStop Color="#00000000" />
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                            <Rectangle Margin="0,144,0,0"
                                       Height="2"
                                       VerticalAlignment="Top">
                                <Rectangle.Fill>
                                    <LinearGradientBrush EndPoint="1,0.5"
                                                         StartPoint="0,0.5">
                                        <GradientStop Color="{DynamicResource appClr1_c}"
                                                      Offset="0.575" />
                                        <GradientStop Color="#00000000" />
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                        <ToggleButton x:Name="button"
                                      Width="32"
                                      Height="32"
                                      Style="{StaticResource OrgToggleButton}"
                                      Background="{StaticResource SmallExpand}"
                                      IsChecked="False"
                                      VerticalAlignment="Top"
                                      Margin="0,10,0,0"
                                      RenderTransformOrigin="0.5,0.5">
                            <ToggleButton.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform />
                                    <TranslateTransform />
                                </TransformGroup>
                            </ToggleButton.RenderTransform>
                        </ToggleButton>
                    </Grid>

                </Border>
                <Border x:Name="border2"
                        Width="32"
                        BorderThickness="0,0,1,0"
                        BorderBrush="{DynamicResource appClr1}"
                        Margin="0"
                        Background="#FFE6E6E6"
                        HorizontalAlignment="Left"
                        CornerRadius="0,5,5,0">
                    <Border.Effect>
                        <DropShadowEffect ShadowDepth="0"
                                          BlurRadius="10"
                                          Opacity="1"
                                          Color="{DynamicResource appClr1_c}" />
                    </Border.Effect>
                    <Grid>
                        <TextBlock x:Name="textBlock2"
                                   Text="رخدادهای نتیجه"
                                   FontFamily="{StaticResource mainFontFamily}"
                                   FontSize="18"
                                   Foreground="{DynamicResource appClr1}"
                                   RenderTransformOrigin="0.5,0.5"
                                   Margin="-95,89,15,0"
                                   VerticalAlignment="Top">
                            <TextBlock.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform Angle="90"
                                                     CenterX="0.5"
                                                     CenterY="0.5" />
                                    <TranslateTransform X="55" />
                                </TransformGroup>
                            </TextBlock.RenderTransform>
                        </TextBlock>
                        <Grid x:Name="grid2"
                              Margin="0,48,0,0"
                              Opacity="0"
                              Visibility="Collapsed">
                            <Rectangle VerticalAlignment="Top"
                                       HorizontalAlignment="Left"
                                       Width="20"
                                       Height="100"
                                       Fill="{DynamicResource appClr1Opac}" />
                            <TextBlock Text="پس از فعالیت قبلی"
                                       FontFamily="{StaticResource mainFontFamily}"
                                       FontSize="14"
                                       Foreground="White"
                                       RenderTransformOrigin="0.5,0.5"
                                       Margin="-135,81,25,0"
                                       VerticalAlignment="Top">
                                <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform />
                                        <SkewTransform />
                                        <RotateTransform Angle="90"
                                                         CenterX="0.5"
                                                         CenterY="0.5" />
                                        <TranslateTransform X="55" />
                                    </TransformGroup>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <Rectangle Fill="{DynamicResource appClr2Opac}"
                                       HorizontalAlignment="Left"
                                       Width="20"
                                       Margin="0,100,0,0" />
                            <TextBlock Text="هنگام فعالیت قبلی"
                                       FontFamily="{StaticResource mainFontFamily}"
                                       FontSize="14"
                                       Foreground="White"
                                       RenderTransformOrigin="0.5,0.5"
                                       Margin="-135,188,25,0"
                                       VerticalAlignment="Top">
                                <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform />
                                        <SkewTransform />
                                        <RotateTransform Angle="90"
                                                         CenterX="0.5"
                                                         CenterY="0.5" />
                                        <TranslateTransform X="55" />
                                    </TransformGroup>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <StackPanel Width="42"
                                        HorizontalAlignment="Right"
                                        Margin="0,0,4,0">
                                <Button x:Name="evtRstAftrAnyCdnAftrAct"
                                        Tag="anyCdnEvtRst"
                                        ToolTip="وقوع هر شرایطی پس از فعایت"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource GeneralAfter}"
                                        Margin="0,10,0,0" />
                                <Button x:Name="evtRstSpcCdnAftrAct"
                                        Tag="spcCdnEvtRstAftr"
                                        ToolTip="وقوع شرایط خاص پس از فعایت"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource SpecialAfter}"
                                        Margin="0,2,0,0" />
                                <Button x:Name="evtRstSpcCdnInTimImpAct"
                                        Tag="spcCdnEvtRstInnTim"
                                        ToolTip="وقوع شرایط خاص هنگام فعایت"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource SpecialDuring}"
                                        Margin="0,10,0,0" />
                                <Button x:Name="evtRstErorInTimImpAct"
                                        Tag="errAccurEvtRst"
                                        ToolTip="وقوع خطا هنگام فعایت"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource ErrorDuring}"
                                        Margin="0,2,0,0" />
                                <Button x:Name="evtRstCnlInTimImpAct"
                                        Tag="cancelEvtRst"
                                        ToolTip="لغو"
                                        telerik:DragDropManager.AllowDrag="True"
                                        Style="{StaticResource OrgButton}"
                                        Background="{StaticResource CancelDuring}"
                                        Margin="0,2,0,0" />
                            </StackPanel>
                            <Rectangle Margin="0,99,0,0"
                                       Height="2"
                                       VerticalAlignment="Top">
                                <Rectangle.Fill>
                                    <LinearGradientBrush EndPoint="0,0.5"
                                                         StartPoint="1,0.5">
                                        <GradientStop Color="{DynamicResource appClr1_c}"
                                                      Offset="0.575" />
                                        <GradientStop Color="#00000000" />
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                        <ToggleButton x:Name="button2"
                                      Width="32"
                                      Height="32"
                                      Style="{StaticResource OrgToggleButton}"
                                      Background="{StaticResource SmallExpand}"
                                      IsChecked="False"
                                      VerticalAlignment="Top"
                                      Margin="0,10,0,0"
                                      RenderTransformOrigin="0.5,0.5">
                            <ToggleButton.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform Angle="180" />
                                    <TranslateTransform />
                                </TransformGroup>
                            </ToggleButton.RenderTransform>
                        </ToggleButton>
                    </Grid>

                </Border>
            </Grid>
            <!--<view:ActivityDiagram x:Name="ActDgrm2"
                                      Grid.Column="0"
                                      Margin="0,10"
                                      Visibility="{Binding DataContext.IsActVisible, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                      DataContext="{Binding ActDgrm}" />-->
            <GridSplitter Grid.Row="1"
                          Grid.Column="0"
                          Background="{DynamicResource appClr1}"
                          Height="5" />
            <Grid x:Name="grd"
                  VerticalAlignment="Stretch"
                  Margin="0,20,0,0"
                  Background="Transparent"
                  Grid.Row="2"
                  Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="150" />
                </Grid.ColumnDefinitions>
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              Background="Transparent"
                              Grid.Column="1"
                              HorizontalScrollBarVisibility="Auto"
                              MaxHeight="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=grd}">
                    <ContentControl Content="{Binding SelectedObj}"
                                    IsEnabled="{Binding SelectedObj.IsEnabled}"
                                    Background="Transparent"
                                    Visibility="{Binding DataContext.Activity, Converter={StaticResource ObjectToVisibilityConverter}, ElementName=ActDgrm}"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch" />
                </ScrollViewer>
            </Grid>
            <!--<ucView:AddEvtRstPnl HorizontalAlignment="Left"
                                 VerticalAlignment="Top"
                                 MaxWidth="125"
                                 Width="125"
                                 Visibility="{Binding DataContext.IsActVisible, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                 Margin="10"
                                 Opacity="0" />
            <ucView:AddEvtSrtPnl HorizontalAlignment="Right"
                                 VerticalAlignment="Top"
                                 MaxWidth="125"
                                 Width="125"
                                 Visibility="{Binding DataContext.IsActVisible, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                 Margin="10"
                                 Opacity="0" />-->
        </Grid>
    </Grid>
</UserControl>
