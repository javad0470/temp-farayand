<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:y="http://www.yworks.com/xml/yfiles-wpf/2.0/xaml"
                    xmlns:custom="clr-namespace:SSYM.OrgDsn.UI"
                    xmlns:OrgChart="clr-namespace:SSYM.OrgDsn.UI.View.EntityDefinition.UserCtl.Ywork">

    <!-- Converters -->

    <!-- This converter is used to get an image for an employee. -->
    <OrgChart:NameToImageSourceConverter x:Key="NameToImageSourceConverter" />
    <OrgChart:StatusToSolidColorBrushConverter x:Key="StatusToColorConverter" />
    <OrgChart:NameToShortNameConverter x:Key="NameToShortNameConverter" />
    <OrgChart:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />

    <!-- Template for the shiny button used for the navigation -->
    <Style x:Key="NavigationButtonStyle"
           TargetType="{x:Type ButtonBase}">
        <Setter Property="Background">
            <Setter.Value>
                <RadialGradientBrush>
                    <GradientBrush.GradientStops>
                        <GradientStopCollection>
                            <GradientStop Color="black"
                                          Offset="0" />
                            <GradientStop Color="black"
                                          Offset="1" />
                        </GradientStopCollection>
                    </GradientBrush.GradientStops>
                </RadialGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Foreground"
                Value="white" />
        <Setter Property="Margin"
                Value="1" />
        <Setter Property="Width"
                Value="16" />
        <Setter Property="Height"
                Value="16" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ButtonBase}">
                    <Grid>
                        <Rectangle x:Name="GelBackground"
                                   Opacity="1"
                                   RadiusX="9"
                                   RadiusY="9"
                                   Fill="{TemplateBinding  Background}"
                                   StrokeThickness="0.35">
                            <Rectangle.Stroke>
                                <LinearGradientBrush StartPoint="0,0"
                                                     EndPoint="0,1">
                                    <GradientBrush.GradientStops>
                                        <GradientStopCollection>
                                            <GradientStop Color="white"
                                                          Offset="0" />
                                            <GradientStop Color="#666666"
                                                          Offset="1" />
                                        </GradientStopCollection>
                                    </GradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </Rectangle.Stroke>
                        </Rectangle>
                        <Rectangle x:Name="GelShine"
                                   Margin="2,2,2,0"
                                   VerticalAlignment="top"
                                   RadiusX="6"
                                   RadiusY="6"
                                   Opacity="1"
                                   Stroke="transparent"
                                   Height="15px">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0"
                                                     EndPoint="0,1">
                                    <GradientBrush.GradientStops>
                                        <GradientStopCollection>
                                            <GradientStop Color="#ccffffff"
                                                          Offset="0" />
                                            <GradientStop Color="transparent"
                                                          Offset="1" />
                                        </GradientStopCollection>
                                    </GradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <ContentPresenter x:Name="GelButtonContent"
                                          VerticalAlignment="center"
                                          HorizontalAlignment="center"
                                          Content="{TemplateBinding  Content}" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver"
                                 Value="true">
                            <Setter Property="Rectangle.Fill"
                                    TargetName="GelBackground">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientBrush.GradientStops>
                                            <GradientStopCollection>
                                                <GradientStop Color="lime"
                                                              Offset="0" />
                                                <GradientStop Color="DarkGreen"
                                                              Offset="1" />
                                            </GradientStopCollection>
                                        </GradientBrush.GradientStops>
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsPressed"
                                 Value="true">
                            <Setter Property="Rectangle.Fill"
                                    TargetName="GelBackground">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientBrush.GradientStops>
                                            <GradientStopCollection>
                                                <GradientStop Color="#ffcc00"
                                                              Offset="0" />
                                                <GradientStop Color="#cc9900"
                                                              Offset="1" />
                                            </GradientStopCollection>
                                        </GradientBrush.GradientStops>
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsEnabled"
                                 Value="True">
                            <Setter Property="Opacity"
                                    TargetName="GelBackground"
                                    Value="1" />
                        </Trigger>
                        <Trigger Property="IsEnabled"
                                 Value="False">
                            <Setter Property="Opacity"
                                    TargetName="GelBackground"
                                    Value="0.4" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsPressed"
                     Value="true">
                <Setter Property="Foreground"
                        Value="black" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- Template for displaying all properties of an employee for the properties view -->
    <DataTemplate x:Key="AllPropertiesTemplate">
        <Grid Name="Grid">
            <Grid.ToolTip>
                <ContentPresenter ContentTemplate="{StaticResource AllPropertiesTemplate}" />
            </Grid.ToolTip>
            <Grid.Resources>
                <Style TargetType="TextBlock">
                    <Style.Setters>
                        <Setter Property="Foreground"
                                Value="Black" />
                        <Setter Property="TextWrapping"
                                Value="NoWrap" />
                        <Setter Property="Padding"
                                Value="2,0,2,0" />
                    </Style.Setters>
                </Style>
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="1"
                       Text="{Binding FldNamPosPst}" />
        </Grid>
    </DataTemplate>

    <!-- Template for displaying only the main properties of an employee for tooltips -->
    <DataTemplate x:Key="MainPropertiesTemplate">
        <Grid Name="Grid">
            <Grid.Resources>
                <Style TargetType="TextBlock">
                    <Style.Setters>
                        <Setter Property="Foreground"
                                Value="Black" />
                        <Setter Property="TextWrapping"
                                Value="NoWrap" />
                        <Setter Property="Width"
                                Value="Auto" />
                        <Setter Property="Height"
                                Value="Auto" />
                        <Setter Property="Padding"
                                Value="2,0,2,0" />
                        <Setter Property="HorizontalAlignment"
                                Value="Left" />
                    </Style.Setters>
                </Style>
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0"
                       Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Text="{Binding XPath=@name}"
                       FontWeight="Bold" />
            <TextBlock Grid.Row="1"
                       Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Text="{Binding XPath=@position}" />
            <TextBlock Grid.Row="2"
                       Grid.Column="0"
                       Text="Status" />
            <TextBlock Grid.Row="2"
                       Grid.Column="1"
                       Text="{Binding XPath=@status}" />
        </Grid>
    </DataTemplate>

    <!-- Template for displaying an employee in just one text line for the structure view -->
    <HierarchicalDataTemplate x:Key="OneLinePropertiesTemplate"
                              ItemsSource="{Binding TblPosPstOrg1}">
        <Grid Name="Grid">
            <Grid.ToolTip>
                <ContentPresenter ContentTemplate="{StaticResource AllPropertiesTemplate}" />
            </Grid.ToolTip>
            <Grid.Resources>
                <Style TargetType="TextBlock">
                    <Style.Setters>
                        <Setter Property="Foreground"
                                Value="Black" />
                        <Setter Property="TextWrapping"
                                Value="NoWrap" />
                        <Setter Property="Padding"
                                Value="2,0,2,0" />
                    </Style.Setters>
                </Style>
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <!--<Rectangle x:Name="StatusIndicator"
                       Grid.Column="0"
                       RadiusX="8"
                       RadiusY="8"
                       Width="8"
                       Height="8"
                       Margin="0,0,5,0"
                       VerticalAlignment="Center"
                       Fill="{Binding XPath=@status, Converter={StaticResource StatusToColorConverter}}" />-->
            <TextBlock Grid.Column="1"
                       Text="{Binding FldNamPosPst}" />
        </Grid>
    </HierarchicalDataTemplate>

    <!-- data template for an employee node at the detail zoom level -->
    <!-- An image is displayed together with text for the name, position, email, phone and fax attributes. -->
    <!-- Additionally there is a little graphic for displaying the color-coded status of an employee. -->
    <DataTemplate x:Key="DetailNodeStyleTemplate">
        <Grid>
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

            </Grid.ColumnDefinitions>

            <Image Height="30"
                   Width="30"
                   Margin="5,0"
                   VerticalAlignment="Top">
                <Image.Style>
                    <Style TargetType="Image">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="1">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPos2}"></Setter>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="2">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPst2}"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>

            <TextBlock Grid.Column="0"
                       Grid.ColumnSpan="2"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"
                       TextWrapping="Wrap"
                       Foreground="White"
                       Text="{Binding FldNamPosPst}"
                       FontSize="20" />

        </Grid>
    </DataTemplate>

    <!-- data template for an employee node at the intermediate zoom level. -->
    <!-- Just the name and a color-coded status indicator graphic are displayed. -->
    <DataTemplate x:Key="IntermediateNodeStyleTemplate">
        <Grid HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

            </Grid.ColumnDefinitions>

            <Image Height="30"
                   Width="30"
                   VerticalAlignment="Center"
                   Margin="5,0">
                <Image.Style>
                    <Style TargetType="Image">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="1">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPos2}"></Setter>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="2">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPst2}"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>

            <TextBlock Grid.Column="1"
                       VerticalAlignment="Center"
                       Foreground="White"
                       Text="{Binding FldNamPosPst}"
                       TextWrapping="Wrap"
                       FontSize="20" />

        </Grid>
    </DataTemplate>

    <!-- data template for an employee node at the overview zoom level. -->
    <!-- Just the abbreviated name and a color-coded status indicator graphic are displayed. -->
    <DataTemplate x:Key="OverviewNodeStyleTemplate">
        <Grid HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

            </Grid.ColumnDefinitions>

            <Image Height="30"
                   Width="30"
                   Margin="5,0"
                   VerticalAlignment="Center">
                <Image.Style>
                    <Style TargetType="Image">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="1">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPos2}"></Setter>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding FldCodTyp}"
                                         Value="2">
                                <Setter Property="Source"
                                        Value="{StaticResource orgPst2}"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>

            <TextBlock Grid.Column="1"
                       VerticalAlignment="Center"
                       Foreground="White"
                       Text="{Binding FldNamPosPst}"
                       TextWrapping="Wrap"
                       FontSize="20" />

        </Grid>
    </DataTemplate>

    <OrgChart:ZoomToTemplateConverter x:Key="ZoomConverter"
                                      DetailThreshold="0.7"
                                      OverviewThreshold="0.4"
                                      DetailTemplate="{StaticResource DetailNodeStyleTemplate}"
                                      OverviewTemplate="{StaticResource DetailNodeStyleTemplate}"
                                      NormalTemplate="{StaticResource DetailNodeStyleTemplate}">
    </OrgChart:ZoomToTemplateConverter>

    <!-- The main node style template switches the visual appearance of the employee nodes with -->
    <!-- respect to the focused state by delegating to one of the templates defined above. -->
    <Style x:Key="PosPsteNodeControlStyle"
           TargetType="y:NodeControl">
        <Setter Property="MinWidth"
                Value="250" />
        <Setter Property="MinHeight"
                Value="100" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="y:NodeControl">
                    <Border x:Name="border"
                            BorderThickness="0"
                            CornerRadius="0"
                            Background="{DynamicResource appClr1}"
                            BorderBrush="{DynamicResource appClr1}">
                        <Grid>
                            <!-- Contents of the node using one of the data templates above, default OverviewNodeStyleTemplate -->
                            <ContentPresenter Name="Presenter"
                                              ContentTemplate="{Binding RelativeSource={RelativeSource TemplatedParent},Path=Canvas.Zoom, Converter={StaticResource ZoomConverter}}" />
                            <StackPanel x:Name="Buttons"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Bottom"
                                        HorizontalAlignment="Right"
                                        Visibility="Collapsed">
                                <StackPanel.Resources>
                                    <Style TargetType="Button"
                                           BasedOn="{StaticResource CommonBtnStyle}">

                                        <Setter Property="Width"
                                                Value="24" />
                                        <Setter Property="Height"
                                                Value="32" />
                                    </Style>
                                </StackPanel.Resources>
                                <Grid>
                                    <Button ToolTipService.ToolTip="نمایش گره های پدر گره جاری"
                                            Visibility="{Binding IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            Margin="5"
                                            VerticalAlignment="Center"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Top"
                                            CommandParameter="{TemplateBinding Item}"
                                            Command="OrgChart:OrgChart.ShowParentCommand">

                                        <custom:BackgroundedImage Source="{StaticResource TreeShowUp}" />

                                    </Button>
                                    <Button ToolTipService.ToolTip="غیر قابل مشاهده کردن گره های پدر گره جاری"
                                            Visibility="{Binding IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            Margin="5"
                                            VerticalAlignment="Center"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Top"
                                            Command="OrgChart:OrgChart.HideParentCommand"
                                            CommandParameter="{TemplateBinding Item}">
                                        <custom:BackgroundedImage Source="{StaticResource TreeCloseUp}" />

                                    </Button>

                                </Grid>

                                <Grid>
                                    <Button ToolTipService.ToolTip="نمایش گره های فرزند گره جاری"
                                            Visibility="{Binding IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            Margin="5"
                                            VerticalAlignment="Center"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Top"
                                            Command="OrgChart:OrgChart.ShowChildrenCommand"
                                            CommandParameter="{TemplateBinding Item}">
                                        <custom:BackgroundedImage Source="{StaticResource TreeShowDown}" />

                                    </Button>
                                    <Button ToolTipService.ToolTip="غیر قابل مشاهده کردن گره های فرزند گره جاری"
                                            Visibility="{Binding IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            Margin="5"
                                            VerticalAlignment="Center"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Top"
                                            Command="OrgChart:OrgChart.HideChildrenCommand"
                                            CommandParameter="{TemplateBinding Item}">
                                        <custom:BackgroundedImage Source="{StaticResource TreeCloseDown}" />

                                    </Button>

                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver"
                                 Value="True">
                            <Setter TargetName="border"
                                    Property="Background"
                                    Value="{DynamicResource appClr2Opac}" />

                            <Setter TargetName="border"
                                    Property="BorderBrush"
                                    Value="{DynamicResource appClr2Opac}" />

                            <Setter TargetName="Buttons"
                                    Property="Visibility"
                                    Value="Visible" />
                        </Trigger>
                        <Trigger Property="ItemFocused"
                                 Value="True">
                            <Setter TargetName="border"
                                    Property="Background"
                                    Value="{DynamicResource appClr2}" />

                            <Setter TargetName="border"
                                    Property="BorderBrush"
                                    Value="{DynamicResource appClr2}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <SolidColorBrush x:Key="PrimaryBrush"
                     Color="{StaticResource ResourceKey={x:Static SystemColors.ControlDarkColorKey}}" />
    <SolidColorBrush x:Key="SecondaryBrush"
                     Color="{StaticResource ResourceKey={x:Static SystemColors.ControlColorKey}}" />
    <SolidColorBrush x:Key="HeaderBackgroundBrush"
                     Color="{StaticResource ResourceKey={x:Static SystemColors.ControlDarkColorKey}}" />
    <SolidColorBrush x:Key="HeaderForegroundBrush"
                     Color="{StaticResource ResourceKey={x:Static SystemColors.ControlLightLightColorKey}}" />

    <DataTemplate x:Key="HeaderTemplate">
        <Border Background="{DynamicResource HeaderBackgroundBrush}"
                Padding="10,5">
            <ContentControl Content="{Binding}"
                            KeyboardNavigation.IsTabStop="false"
                            Foreground="{StaticResource HeaderForegroundBrush}" />
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="HeaderContentTemplate">
        <Border Padding="10,5">
            <ContentControl Content="{Binding}"
                            KeyboardNavigation.IsTabStop="false"
                            Foreground="{StaticResource HeaderForegroundBrush}" />
        </Border>
    </DataTemplate>

    <Style TargetType="TextBlock"
           x:Key="HeaderTemplateStyle">
        <Setter Property="Background"
                Value="{StaticResource HeaderBackgroundBrush}" />
        <Setter Property="Foreground"
                Value="{StaticResource HeaderForegroundBrush}" />
        <Setter Property="Padding"
                Value="10,5" />
    </Style>

    <Style TargetType="Paragraph">
        <Setter Property="Margin"
                Value="0,10" />
    </Style>

    <Style TargetType="List">
        <Setter Property="Margin"
                Value="0,10" />
        <Setter Property="Padding"
                Value="16,0,0,0" />
    </Style>

    <Style TargetType="Paragraph"
           x:Key="HtmlH2">
        <Setter Property="Margin"
                Value="0,20,0,10" />
        <Setter Property="FontSize"
                Value="16" />
    </Style>

    <Style TargetType="Paragraph"
           x:Key="HtmlDt">
        <Setter Property="Margin"
                Value="0,10,0,2" />
        <Setter Property="FontWeight"
                Value="Bold" />
    </Style>

    <Style TargetType="Paragraph"
           x:Key="HtmlDi">
        <Setter Property="Margin"
                Value="0" />
        <Setter Property="Margin"
                Value="6,0,0,10" />
    </Style>

    <Style TargetType="Run"
           x:Key="HtmlEm">
        <Setter Property="FontStyle"
                Value="Italic" />
    </Style>

    <Style TargetType="HeaderedContentControl"
           x:Key="HeaderedContentStyle">
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="Padding"
                Value="0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HeaderedContentControl">
                    <Border BorderBrush="{StaticResource PrimaryBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Margin="0"
                            Padding="0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border Background="{DynamicResource HeaderBackgroundBrush}"
                                    Padding="10,5">
                                <ContentControl ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                Content="{TemplateBinding Header}"
                                                KeyboardNavigation.IsTabStop="false"
                                                Foreground="{StaticResource HeaderForegroundBrush}" />
                            </Border>
                            <ContentControl ContentTemplate="{TemplateBinding ContentTemplate}"
                                            Content="{TemplateBinding Content}"
                                            Grid.Row="1"
                                            Margin="{TemplateBinding Padding}"
                                            VerticalAlignment="Stretch"
                                            HorizontalAlignment="Stretch"
                                            VerticalContentAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            KeyboardNavigation.IsTabStop="false" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="HeaderedContentControl"
           x:Key="DescriptionStyle"
           BasedOn="{StaticResource HeaderedContentStyle}">
        <Setter Property="BorderThickness"
                Value="0,0,1,0" />
        <Setter Property="Header"
                Value="Description" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HeaderedContentControl">
                    <Border BorderBrush="{StaticResource PrimaryBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Margin="0"
                            Padding="0"
                            HorizontalAlignment="Stretch">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border Background="{DynamicResource HeaderBackgroundBrush}"
                                    Padding="10,5">
                                <ContentControl ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                Content="{TemplateBinding Header}"
                                                Foreground="{StaticResource HeaderForegroundBrush}" />
                            </Border>
                            <ScrollViewer Margin="0"
                                          Padding="5"
                                          Grid.Row="1"
                                          HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Auto"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          Content="{TemplateBinding Content}">
                                <ScrollViewer.Resources>
                                    <Style TargetType="RichTextBox">
                                        <Setter Property="IsReadOnly"
                                                Value="true" />
                                        <Setter Property="BorderThickness"
                                                Value="0" />
                                    </Style>
                                </ScrollViewer.Resources>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <GridLength x:Key="HeaderContentWidth">250</GridLength>

    <Style TargetType="HeaderedContentControl"
           x:Key="DemoStyle"
           BasedOn="{StaticResource HeaderedContentStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HeaderedContentControl">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="{DynamicResource HeaderContentWidth}" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <HeaderedContentControl Style="{StaticResource DescriptionStyle}"
                                                Content="{TemplateBinding Header}"
                                                ContentTemplate="{TemplateBinding HeaderTemplate}" />
                        <GridSplitter Grid.Column="1"
                                      Width="5"
                                      VerticalAlignment="Stretch"
                                      HorizontalAlignment="Center"
                                      ShowsPreview="True"
                                      ResizeBehavior="PreviousAndNext" />
                        <ContentPresenter Grid.Column="2" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ScrollViewer"
           x:Key="DescriptionScroller">
        <Setter Property="VerticalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="HorizontalScrollBarVisibility"
                Value="Disabled" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Border BorderBrush="{StaticResource PrimaryBrush}"
                            BorderThickness="1"
                            Margin="5"
                            Padding="2"
                            HorizontalAlignment="Stretch">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border Padding="10,5">
                                <ContentControl ContentTemplate="{StaticResource HeaderTemplate}"
                                                Content="Description"
                                                Foreground="{StaticResource HeaderForegroundBrush}" />
                            </Border>
                            <ScrollViewer Grid.Row="1"
                                          Name="PART_ScrollContentPresenter"
                                          KeyboardNavigation.DirectionalNavigation="Local"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          VerticalScrollBarVisibility="{TemplateBinding VerticalScrollBarVisibility}"
                                          HorizontalScrollBarVisibility="{TemplateBinding HorizontalScrollBarVisibility}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Expander"
           x:Key="DemoExpanderStyle">
        <Style.Setters>
            <Setter Property="Margin"
                    Value="0,0,0,5" />
            <Setter Property="Background"
                    Value="{StaticResource HeaderBackgroundBrush}" />
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Border Background="{DynamicResource HeaderForegroundBrush}"
                                Padding="0">
                            <ContentControl Content="{Binding}"
                                            KeyboardNavigation.IsTabStop="false"
                                            Foreground="{StaticResource PrimaryBrush}" />
                        </Border>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="HeaderTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <ContentControl Content="{Binding}"
                                        KeyboardNavigation.IsTabStop="false"
                                        Foreground="{StaticResource HeaderForegroundBrush}"
                                        Margin="2,5" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>

    <DataTemplate x:Key="ImageButtonContentTemplate">
        <Image x:Name="Image"
               Source="{Binding}">
            <Image.Style>
                <Style TargetType="{x:Type Image}">
                    <Setter Property="Width"
                            Value="16" />
                    <Setter Property="Height"
                            Value="16" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type ButtonBase}, AncestorLevel=1}, Path=IsEnabled}"
                                     Value="False">
                            <Setter Property="Opacity"
                                    Value="0.50" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Image.Style>
        </Image>
    </DataTemplate>

</ResourceDictionary>